/*
 *
 * angular-forms.js - v1.0.4 - 2014-02-04
 *
 */
"use strict";angular.module("AngularFormsModule",[]).factory("Empty",[function(){return function(a){return null===a||void 0===a||""===a?!0:!1}}]).factory("AngularForms",["$compile","Empty",function(a,b){return function(c){var d=function(){this.init=function(){this.form=c.form,this.targetId=c.targetId,this.scope=c.scope,this.col_size="col-sm-10"},this.build=function(){var a,b,c,d,e,f,g=this.startForm();this.form.horizontal&&this.inputColSize&&(this.col_size=this.form.inputColSize);for(b in this.form.fields){switch(c=this.form.fields[b],d="",e="",c.type){case"text":case"password":case"email":case"number":case"spinner":d+=this.inputField(b,c);break;case"select":d+=this.select(b,c);break;case"checkbox":case"radio":d+=this.indicator(b,c);break;case"checkbox_group":d+=this.checkboxGroup(b,c);break;case"radio_group":d+=this.radioGroup(b,c);break;case"textarea":d+=this.textArea(b,c)}if(c.helpText&&(d+='<div class="help-text">'+c.helpText+"</div>"),d+=this.addValidations(b,c),"checkbox"!==c.type&&"radio"!==c.type&&c.label&&(e=this.fieldLabel(b,c)),this.form.horizontal)g+='<div class="form-group',g+=c.groupClass?" "+c.groupClass:"",g+='"',g+=c.ngHide?this.attribute(c,"ngHide"):"",g+=c.ngShow?this.attribute(c,"ngShow"):"",g+=">\n",g+=e,"checkbox"===c.type?(f="col-sm-offset-"+(12-parseInt(this.col_size.replace(/[a-z,A-Z,-]/g,""),10)),g+='<div class="'+f+" "+this.col_size+'">\n',g+='<div class="checkbox">\n'):"radio"===c.type?(f="col-sm-offset-"+(12-parseInt(this.col_size.replace(/[a-z,A-Z,-]/g,""),10)),g+='<div class="'+f+" "+this.col_size+'">\n',g+='<div class="radio">\n'):g+='<div class="'+this.col_size+'">\n',g+=d,g+="checkbox"===c.type||"radio"===c.type?"</div><!-- checkbox/radio -->\n":"",g+="</div>\n",g+="</div><!-- form-group -->\n";else{switch(g+='<div class="',c.type){case"checkbox":g+="checkbox";break;case"radio":g+="radio";break;default:g+="form-group"}g+=c.groupClass?" "+c.groupClass:"",g+='"',g+=c.ngHide?this.attribute(c,"ngHide"):"",g+=c.ngShow?this.attribute(c,"ngShow"):"",g+=">\n",g+=e,g+=d,g+=this.form.horizontal?"</div>\n":"",g+="</div><!-- form-group -->\n"}}if(this.form.buttons){g+='<div class="form-group buttons">\n',this.form.horizontal&&(f="col-sm-offset-"+(12-parseInt(this.col_size.replace(/[a-z,A-Z,-]/g,""),10)),g+='<div class="'+f+" "+this.col_size+'">\n');for(a in this.form.buttons)g+=this.button(a,this.form.buttons[a]);g+=this.form.horizontal?"</div>\n":"",g+="</div>\n"}return g+="</form>\n"},this.inputField=function(a,b){var c,d="";d+="spinner"===b.type?"<div>\n":"",d+="<input ",d+="spinner"!==b.type?'type="'+b.type+'" ':"",d+="spinner"===b.type?'af-spinner="'+this.form.name+'" ':"",d+='ng-model="',d+=b.ngModel?b.ngModel:a,d+='" name="'+a+'" id="fld_'+a+'" ',d+=this.addInputClass(b);for(c in b)"label"!==c&&"type"!==c&&"srOnly"!==c&&"class"!==c&&"ngHide"!==c&&"ngShow"!==c&&(d+=this.attribute(b,c));return d+=">",d+="spinner"===b.type?"</div>\n":""},this.textArea=function(a,b){var c,d="";d+='<textarea ng-model="',d+=b.ngModel?b.ngModel:a,d+='" name="'+a+'" id="fld_'+a+'" ',d+=this.addInputClass(b),d+=b.rows?"":'rows="5" ';for(c in b)"label"!==c&&"type"!==c&&"srOnly"!==c&&"class"!==c&&"ngHide"!==c&&"ngShow"!==c&&(d+=this.attribute(b,c));return d+="></textarea>"},this.select=function(a,b){var c,d="";d+='<select ng-model="',d+=b.ngModel?b.ngModel:a,d+='"',d+='" name="'+a+'" id="fld_'+a+'" ',d+=this.addInputClass(b),"object"==typeof b.optionArray?(this.scope[this.form.name+"_"+a+"_options"]=b.optionArray,d+='ng-options="itm.id as itm.label for itm in '+this.form.name+"_"+a+'_options" '):d+='ng-options="itm.id as itm.label for itm in '+b.optionArray+'" ';for(c in b)"label"!==c&&"type"!==c&&"srOnly"!==c&&"class"!==c&&"optionArray"!==c&&"placeholder"!==c&&"ngHide"!==c&&"ngShow"!==c&&(d+=this.attribute(b,c));return d+=">",d+=b.placeholder?'\n<option value="">'+b.placeholder+"</option>\n":"",d+="</select>\n"},this.indicator=function(a,b){var c,d="";d+='<input type="'+b.type+'" ng-model="',d+=b.ngModel?b.ngModel:a,d+='" name="'+a+'" id="fld_'+a+'" ',d+=b["class"]?'class="'+b["class"]+'" ':"";for(c in b)"label"!==c&&"type"!==c&&"srOnly"!==c&&"class"!==c&&"ngHide"!==c&&"ngShow"!==c&&(d+=this.attribute(b,c));return d+=">",("checkbox"===b.type||"radio"===b.type)&&(d=this.labelWrap(a,b,d)),d},this.checkboxGroup=function(a,b){var c,d="";for(d+='<div class="checkbox-group">\n',c=0;c<b.checkboxes.length;c++)b.checkboxes[c].type="checkbox",b.checkboxes[c].labelClass="checkbox-inline",d+=this.indicator(b.checkboxes[c].model,b.checkboxes[c]);return d+="</div><!-- checkbox-group -->\n"},this.radioGroup=function(a,b){var c,d="";for(d+='<div class="radio-group">\n',c=0;c<b.options.length;c++)b.options[c].type="radio",b.options[c].labelClass="radio-inline",b.options[c].ngModel=b.ngModel?b.ngModel:a,d+=this.indicator(a,b.options[c]);return d+="</div><!-- radio-group -->\n"},this.labelWrap=function(a,b,c){var d="";return d+="<label",d+=b.labelClass?' class="'+b.labelClass+'"':"",d+=b.ngShow?this.attribute(b,"ngShow"):"",d+=b.ngHide?this.attribute(b,"ngHide"):"",d+=">"+c+" "+b.label+"</label>\n"},this.addValidations=function(a,b){var c,d="";return(b.required||b.ngRequired)&&(d+='<div class="error" ng-show="!'+this.form.name+"."+a+".$pristine && "+this.form.name+"."+a+'.$error.required">A value is required.</div>\n'),"email"===b.type&&(d+='<div class="error" ng-show="!'+this.form.name+"."+a+".$pristine && "+this.form.name+"."+a+'.$error.email">Please provide a valid email address.</div>\n'),"number"===b.type&&(d+='<div class="error" ng-show="'+this.form.name+"."+a+'.$error.number">Please provide a numeric value.</div>\n'),b.ngMinlength&&(d+='<div class="error" ng-show="!'+this.form.name+"."+a+".$pristine && "+this.form.name+"."+a+'.$error.minlength">Must contain a minimum of '+b.ngMinlength+" characters.</div>\n"),b.ngMaxlength&&(d+='<div class="error" ng-show="!'+this.form.name+"."+a+".$pristine && "+this.form.name+"."+a+'.$error.maxlength">Length must be less than '+b.ngMaxlength+" characters.</div>\n"),b.ngPattern&&(c=b.patternErrorMsg?b.patternErrorMsg:"Please provide a valid value",d+='<div class="error" ng-show="!'+this.form.name+"."+a+".$pristine && "+this.form.name+"."+a+'.$error.pattern">'+c+"</div>\n"),d+='<div class="error" ng-show="!'+this.form.name+"."+a+".$pristine && "+this.form.name+"_"+a+'_error" ng-bind="'+this.form.name+"_"+a+'_error"></div>\n'},this.fieldLabel=function(a,b){var c,d="";return this.form.horizontal&&(c=this.labelColSize?this.labelColSize:"col-sm-2"),d+='<label for="'+a+'"',(b.srOnly||b.labelClass||this.form.horizontal)&&(d+=' class="',d+=this.form.horizontal?this.col_size+" control-label ":"",d+=b.srOnly?"sr-only ":"",d+=b.labelClass?b.labelClass:"",d+='"'),d+=">"+b.label+"</label>\n"},this.startForm=function(){var a="";return a+="<form",a+=' name="'+this.form.name+'"',(this.form.horizontal||this.form["class"])&&(a+=' class="',a+=this.form.horizontal?"form-horizontal":"",a+=this.form["class"]?" "+this.form["class"]:"",a+='"'),a+=' role="form"',a+=" novalidate >\n"},this.addInputClass=function(a){var b="";return b+='class="',b+="spinner"!==a.type?"form-control":"",b+=a["class"]?" "+a["class"]:"",b+='"'},this.attribute=function(a,b){var c,d="";if(b.match(/^ng/))c=b.replace(/^ng/,"").toLowerCase(),d+=" ng-"+c+'="'+a[b]+'"';else if("helpText"!==b&&"labelClass"!==b&&"defaultValue"!==b)switch(b){case"required":d+=" required";break;case"autocomplete":d+=' autocomplete="',d+=a.autocomplete===!0||"on"===a.autocomplete?'on"':'off"';break;default:d+=" "+b+'="'+a[b]+'" '}return d},this.button=function(a,b){var c,d='<button type="button" class="btn';d+=b["class"]?" "+b["class"]:" btn-default",d+='"';for(c in b)"class"!==c&&"icon"!==c&&"label"!==c&&(d+=this.attribute(b,c));return b.ngDisabled||"save"!==a||(d+=' ng-disabled="'+this.form.name+".$invalid || "+this.form.name+'.$pristine"'),b.ngDisabled||"reset"!==a||(d+=' ng-disabled="'+this.form.name+'.$pristine"'),d+=">",d+=b.icon?'<i class="fa '+b.icon+'"></i> ':"",d+=b.label?b.label:"",d+="</button>\n"},this.inject=function(){var b=angular.element(document.getElementById(this.targetId));b.append(this.build()),a(b)(this.scope)},this.clearErrors=function(){for(var a in this.form.fields)this.scope[this.form.name+"_"+a+"_error"]=""},this.resetForm=function(a){var c,d,e,f,g;e=b(a)?{}:a;for(c in this.form.fields)d=this.form.fields[c],f=d.ngModel?d.ngModel:c,"spinner"===d.type?(g=b(e[f])?b(d.defaultValue)?"":d.defaultValue:e[f],$("#fld_"+c).spinner("value",g)):this.scope[f]=e[f]?e[f]:b(d.defaultValue)?"":d.defaultValue,this.scope[this.form.name][c].$setPristine(),this.scope[this.form.name+"_"+c+"_error"]=""},this.init()};return new d}}]).directive("afSpinner",[function(){return{require:"ngModel",link:function(a,b,c,d){var e=c.afSpinner;$(b).spinner({change:function(){a[c.ngModel]=$(this).spinner("value")},spin:function(){a[e].$setDirty(),d.$dirty=!0,d.$pristine=!1,a.$$phase||a.$digest()}})}}}]);