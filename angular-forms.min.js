angular.module("AngularFormsModule",[]).factory("AngularForms",["$compile",function(g){return function(f){return new function(){this.init=function(){this.form=f.form;this.targetId=f.targetId;this.scope=f.scope;this.col_size="col-sm-10"};this.build=function(){var a=this.startForm(),c,b,d;this.form.horizontal&&this.inputColSize&&(this.col_size=this.form.inputColSize);for(var e in this.form.fields){c=this.form.fields[e];d=b="";switch(c.type){case "text":case "password":case "email":b+=this.inputField(e,
c);break;case "select":b+=this.select(e,c);break;case "checkbox":case "radio":b+=this.indicator(e,c);break;case "checkbox_group":b+=this.checkboxGroup(e,c);break;case "radio_group":b+=this.radioGroup(e,c)}c.helpText&&(b+='<div class="help-text">'+c.helpText+"</div>");b+=this.addValidations(e,c);"checkbox"!=c.type&&"radio"!=c.type&&c.label&&(d=this.fieldLabel(e,c));if(this.form.horizontal)a+='<div class="form-group',a+=c.groupClass?" "+c.groupClass:"",a+='"',a+=c.ngHide?this.attribute(c,"ngHide"):
"",a+=c.ngShow?this.attribute(c,"ngShow"):"",a+=">\n",a+=d,"checkbox"==c.type?(d="col-sm-offset-"+(12-parseInt(this.col_size.replace(/[a-z,A-Z,-]/g,""))),a+='<div class="'+d+" "+this.col_size+'">\n',a+='<div class="checkbox">\n'):"radio"==c.type?(d="col-sm-offset-"+(12-parseInt(this.col_size.replace(/[a-z,A-Z,-]/g,""))),a+='<div class="'+d+" "+this.col_size+'">\n',a+='<div class="radio">\n'):a+='<div class="'+this.col_size+'">\n',a+=b,a+="checkbox"==c.type||"radio"==c.type?"</div>\x3c!-- checkbox/radio --\x3e\n":
"",a+="</div>\n";else{a+='<div class="';switch(c.type){case "checkbox":a+="checkbox";break;case "radio":a+="radio";break;default:a+="form-group"}a+=c.groupClass?" "+c.groupClass:"";a+='"';a+=c.ngHide?this.attribute(c,"ngHide"):"";a+=c.ngShow?this.attribute(c,"ngShow"):"";a+=">\n";a+=d;a+=b;a+=this.form.horizontal?"</div>\n":""}a+="</div>\x3c!-- form-group --\x3e\n"}if(this.form.buttons){a+='<div class="form-group buttons">\n';this.form.horizontal&&(d="col-sm-offset-"+(12-parseInt(this.col_size.replace(/[a-z,A-Z,-]/g,
""))),a+='<div class="'+d+" "+this.col_size+'">\n');for(var f in this.form.buttons)a+=this.button(f,this.form.buttons[f]);a+=this.form.horizontal?"</div>\n":"";a+="</div>\n"}return a+"</form>\n"};this.inputField=function(a,c){var b;b=""+('<input type="'+c.type+'" ng-model="');b+=c.ngModel?c.ngModel:a;b=b+('" name="'+a+'" id="fld_'+a+'" ')+this.addInputClass(c);for(var d in c)"label"!=d&&"type"!=d&&"srOnly"!=d&&"class"!=d&&"ngHide"!=d&&"ngShow"!=d&&(b+=this.attribute(c,d));return b+=">"};this.select=
function(a,c){var b;b='<select ng-model="'+(c.ngModel?c.ngModel:a);b+='"';b+='" name="'+a+'" id="fld_'+a+'" ';b+=this.addInputClass(c);b+='ng-options="itm.id as itm.label for itm in '+c.optionArray+'" ';for(var d in c)"label"!=d&&"type"!=d&&"srOnly"!=d&&"class"!=d&&"optionArray"!=d&&"placeholder"!=d&&"ngHide"!=d&&"ngShow"!=d&&(b+=this.attribute(c,d));b+=">";b+=c.placeholder?'\n<option value="">'+c.placeholder+"</option>\n":"";return b+="</select>\n"};this.indicator=function(a,c){var b;b=""+('<input type="'+
c.type+'" ng-model="');b+=c.ngModel?c.ngModel:a;b=b+('" name="'+a+'" id="fld_'+a+'" ')+(c["class"]?'class="'+c["class"]+'" ':"");for(var d in c)"label"!=d&&"type"!=d&&"srOnly"!=d&&"class"!=d&&"ngHide"!=d&&"ngShow"!=d&&(b+=this.attribute(c,d));b+=">";if("checkbox"==c.type||"radio"==c.type)b=this.labelWrap(a,c,b);return b};this.checkboxGroup=function(a,c){var b;b='<div class="checkbox-group">\n';for(var d=0;d<c.checkboxes.length;d++)c.checkboxes[d].type="checkbox",c.checkboxes[d].labelClass="checkbox-inline",
b+=this.indicator(c.checkboxes[d].model,c.checkboxes[d]);return b+"</div>\x3c!-- checkbox-group --\x3e\n"};this.radioGroup=function(a,c){var b;b='<div class="radio-group">\n';for(var d=0;d<c.options.length;d++)c.options[d].type="radio",c.options[d].labelClass="radio-inline",c.options[d].ngModel=c.ngModel?c.ngModel:a,b+=this.indicator(a,c.options[d]);return b+"</div>\x3c!-- radio-group --\x3e\n"};this.labelWrap=function(a,c,b){a="";this.form&&(a+="<label");a+=c.labelClass?' class="'+c.labelClass+'"':
"";a+=c.ngShow?this.attribute(c,"ngShow"):"";a+=c.ngHide?this.attribute(c,"ngHide"):"";return a+=">"+b+" "+c.label+"</label>\n"};this.addValidations=function(a,c){var b="";if(c.required||c.ngRequired)b+='<div class="error" ng-show="!'+this.form.name+"."+a+".$pristine && "+this.form.name+"."+a+'.$error.required">A value is required.</div>\n';"email"==c.type&&(b+='<div class="error" ng-show="!'+this.form.name+"."+a+".$pristine && "+this.form.name+"."+a+'.$error.email">Please provide a valid email address.</div>\n');
return b};this.fieldLabel=function(a,c){var b;if(this.form.horizontal)var d=this.labelColSize?this.labelColSize:"col-sm-2";b=""+('<label for="'+a+'"');if(c.srOnly||c.labelClass||this.form.horizontal)b=b+' class="'+(this.form.horizontal?d+" control-label ":""),b+=c.srOnly?"sr-only ":"",b+=c.labelClass?c.labelClass:"",b+='"';return b+=">"+c.label+"</label>\n"};this.startForm=function(){var a;a="<form"+(' name="'+this.form.name+'"');if(this.form.horizontal||this.form["class"])a+=' class="',a+=this.form.horizontal?
"form-horizontal":"",a+=this.form["class"]?" "+this.form["class"]:"",a+='"';a+=' role="form"';return a+=" novalidate >\n"};this.addInputClass=function(a){a='class="form-control'+(a["class"]?" "+a["class"]:"");return a+='"'};this.attribute=function(a,c){var b="";if(c.match(/^ng/))var d=c.replace(/^ng/,"").toLowerCase(),b=b+(" ng-"+d+'="'+a[c]+'"');else if("helpText"!=c&&"labelClass"!=c)switch(c){case "required":b+=" required";break;case "autocomplete":b=b+' autocomplete="'+(!0==a.autocomplete||"on"==
a.autocomplete?'on"':'off"');break;default:b+=" "+c+'="'+a[c]+'" '}return b};this.button=function(a,c){var b;b='<button type="button" class="btn'+(c["class"]?" "+c["class"]:" btn-default");b+='"';for(var d in c)"class"!=d&&"icon"!=d&&"label"!=d&&this.attribute(c,d);c.ngDisabled||"save"!=a||(b+=' ng-disabled="'+this.form.name+".$invalid || "+this.form.name+'.$pristine"');c.ngDisabled||"reset"!=a||(b+=' ng-disabled="'+this.form.name+'.$pristine"');b=b+">"+(c.icon?'<i class="fa '+c.icon+'"></i> ':"");
b+=c.label?c.label:"";return b+="</button>\n"};this.inject=function(){var a=angular.element(document.getElementById(this.targetId));a.append(this.build());g(a)(this.scope)};this.init()}}}]);
