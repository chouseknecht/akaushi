/*! angular-forms.js - v1.0.4 - 2014-02-04 */"use strict";angular.module("AngularFormsModule",[]).factory("Empty",[function(){return function(a){return null==a||void 0==a||""==a?!0:!1}}]).factory("AngularForms",["$compile","Empty",function(a,b){return function(c){return new function(){this.init=function(){this.form=c.form,this.targetId=c.targetId,this.scope=c.scope,this.col_size="col-sm-10"},this.build=function(){var a,b,c,d=this.startForm();this.form.horizontal&&this.inputColSize&&(this.col_size=this.form.inputColSize);for(var e in this.form.fields){switch(a=this.form.fields[e],b="",c="",a.type){case"text":case"password":case"email":case"number":case"spinner":b+=this.inputField(e,a);break;case"select":b+=this.select(e,a);break;case"checkbox":case"radio":b+=this.indicator(e,a);break;case"checkbox_group":b+=this.checkboxGroup(e,a);break;case"radio_group":b+=this.radioGroup(e,a);break;case"textarea":b+=this.textArea(e,a)}if(a.helpText&&(b+='<div class="help-text">'+a.helpText+"</div>"),b+=this.addValidations(e,a),"checkbox"!=a.type&&"radio"!=a.type&&a.label&&(c=this.fieldLabel(e,a)),this.form.horizontal){if(d+='<div class="form-group',d+=a.groupClass?" "+a.groupClass:"",d+='"',d+=a.ngHide?this.attribute(a,"ngHide"):"",d+=a.ngShow?this.attribute(a,"ngShow"):"",d+=">\n",d+=c,"checkbox"==a.type){var f="col-sm-offset-"+(12-parseInt(this.col_size.replace(/[a-z,A-Z,-]/g,"")));d+='<div class="'+f+" "+this.col_size+'">\n',d+='<div class="checkbox">\n'}else if("radio"==a.type){var f="col-sm-offset-"+(12-parseInt(this.col_size.replace(/[a-z,A-Z,-]/g,"")));d+='<div class="'+f+" "+this.col_size+'">\n',d+='<div class="radio">\n'}else d+='<div class="'+this.col_size+'">\n';d+=b,d+="checkbox"==a.type||"radio"==a.type?"</div><!-- checkbox/radio -->\n":"",d+="</div>\n",d+="</div><!-- form-group -->\n"}else{switch(d+='<div class="',a.type){case"checkbox":d+="checkbox";break;case"radio":d+="radio";break;default:d+="form-group"}d+=a.groupClass?" "+a.groupClass:"",d+='"',d+=a.ngHide?this.attribute(a,"ngHide"):"",d+=a.ngShow?this.attribute(a,"ngShow"):"",d+=">\n",d+=c,d+=b,d+=this.form.horizontal?"</div>\n":"",d+="</div><!-- form-group -->\n"}}if(this.form.buttons){if(d+='<div class="form-group buttons">\n',this.form.horizontal){var f="col-sm-offset-"+(12-parseInt(this.col_size.replace(/[a-z,A-Z,-]/g,"")));d+='<div class="'+f+" "+this.col_size+'">\n'}for(var g in this.form.buttons)d+=this.button(g,this.form.buttons[g]);d+=this.form.horizontal?"</div>\n":"",d+="</div>\n"}return d+="</form>\n"},this.inputField=function(a,b){var c="";c+="spinner"==b.type?"<div>\n":"",c+="<input ",c+="spinner"!=b.type?'type="'+b.type+'" ':"",c+="spinner"==b.type?'af-spinner="'+this.form.name+'" ':"",c+='ng-model="',c+=b.ngModel?b.ngModel:a,c+='" name="'+a+'" id="fld_'+a+'" ',c+=this.addInputClass(b);for(var d in b)"label"!=d&&"type"!=d&&"srOnly"!=d&&"class"!=d&&"ngHide"!=d&&"ngShow"!=d&&(c+=this.attribute(b,d));return c+=">",c+="spinner"==b.type?"</div>\n":""},this.textArea=function(a,b){var c="";c+='<textarea ng-model="',c+=b.ngModel?b.ngModel:a,c+='" name="'+a+'" id="fld_'+a+'" ',c+=this.addInputClass(b),c+=b.rows?"":'rows="5" ';for(var d in b)"label"!=d&&"type"!=d&&"srOnly"!=d&&"class"!=d&&"ngHide"!=d&&"ngShow"!=d&&(c+=this.attribute(b,d));return c+="></textarea>"},this.select=function(a,b){var c="";c+='<select ng-model="',c+=b.ngModel?b.ngModel:a,c+='"',c+='" name="'+a+'" id="fld_'+a+'" ',c+=this.addInputClass(b),"object"==typeof b.optionArray?(this.scope[this.form.name+"_"+a+"_options"]=b.optionArray,c+='ng-options="itm.id as itm.label for itm in '+this.form.name+"_"+a+'_options" '):c+='ng-options="itm.id as itm.label for itm in '+b.optionArray+'" ';for(var d in b)"label"!=d&&"type"!=d&&"srOnly"!=d&&"class"!=d&&"optionArray"!=d&&"placeholder"!=d&&"ngHide"!=d&&"ngShow"!=d&&(c+=this.attribute(b,d));return c+=">",c+=b.placeholder?'\n<option value="">'+b.placeholder+"</option>\n":"",c+="</select>\n"},this.indicator=function(a,b){var c="";c+='<input type="'+b.type+'" ng-model="',c+=b.ngModel?b.ngModel:a,c+='" name="'+a+'" id="fld_'+a+'" ',c+=b["class"]?'class="'+b["class"]+'" ':"";for(var d in b)"label"!=d&&"type"!=d&&"srOnly"!=d&&"class"!=d&&"ngHide"!=d&&"ngShow"!=d&&(c+=this.attribute(b,d));return c+=">",("checkbox"==b.type||"radio"==b.type)&&(c=this.labelWrap(a,b,c)),c},this.checkboxGroup=function(a,b){var c="";c+='<div class="checkbox-group">\n';for(var d=0;d<b.checkboxes.length;d++)b.checkboxes[d].type="checkbox",b.checkboxes[d].labelClass="checkbox-inline",c+=this.indicator(b.checkboxes[d].model,b.checkboxes[d]);return c+="</div><!-- checkbox-group -->\n"},this.radioGroup=function(a,b){var c="";c+='<div class="radio-group">\n';for(var d=0;d<b.options.length;d++)b.options[d].type="radio",b.options[d].labelClass="radio-inline",b.options[d].ngModel=b.ngModel?b.ngModel:a,c+=this.indicator(a,b.options[d]);return c+="</div><!-- radio-group -->\n"},this.labelWrap=function(a,b,c){var d="";return this.form&&(d+="<label"),d+=b.labelClass?' class="'+b.labelClass+'"':"",d+=b.ngShow?this.attribute(b,"ngShow"):"",d+=b.ngHide?this.attribute(b,"ngHide"):"",d+=">"+c+" "+b.label+"</label>\n"},this.addValidations=function(a,b){var c="";if((b.required||b.ngRequired)&&(c+='<div class="error" ng-show="!'+this.form.name+"."+a+".$pristine && "+this.form.name+"."+a+'.$error.required">A value is required.</div>\n'),"email"==b.type&&(c+='<div class="error" ng-show="!'+this.form.name+"."+a+".$pristine && "+this.form.name+"."+a+'.$error.email">Please provide a valid email address.</div>\n'),"number"==b.type&&(c+='<div class="error" ng-show="'+this.form.name+"."+a+'.$error.number">Please provide a numeric value.</div>\n'),b.ngMinlength&&(c+='<div class="error" ng-show="!'+this.form.name+"."+a+".$pristine && "+this.form.name+"."+a+'.$error.minlength">Must contain a minimum of '+b.ngMinlength+" characters.</div>\n"),b.ngMaxlength&&(c+='<div class="error" ng-show="!'+this.form.name+"."+a+".$pristine && "+this.form.name+"."+a+'.$error.maxlength">Length must be less than '+b.ngMaxlength+" characters.</div>\n"),b.ngPattern){var d=b.patternErrorMsg?b.patternErrorMsg:"Please provide a valid value";c+='<div class="error" ng-show="!'+this.form.name+"."+a+".$pristine && "+this.form.name+"."+a+'.$error.pattern">'+d+"</div>\n"}return c+='<div class="error" ng-show="!'+this.form.name+"."+a+".$pristine && "+this.form.name+"_"+a+'_error" ng-bind="'+this.form.name+"_"+a+'_error"></div>\n'},this.fieldLabel=function(a,b){var c="";if(this.form.horizontal)var d=this.labelColSize?this.labelColSize:"col-sm-2";return c+='<label for="'+a+'"',(b.srOnly||b.labelClass||this.form.horizontal)&&(c+=' class="',c+=this.form.horizontal?d+" control-label ":"",c+=b.srOnly?"sr-only ":"",c+=b.labelClass?b.labelClass:"",c+='"'),c+=">"+b.label+"</label>\n"},this.startForm=function(){var a="";return a+="<form",a+=' name="'+this.form.name+'"',(this.form.horizontal||this.form["class"])&&(a+=' class="',a+=this.form.horizontal?"form-horizontal":"",a+=this.form["class"]?" "+this.form["class"]:"",a+='"'),a+=' role="form"',a+=" novalidate >\n"},this.addInputClass=function(a){var b="";return b+='class="',b+="spinner"!=a.type?"form-control":"",b+=a["class"]?" "+a["class"]:"",b+='"'},this.attribute=function(a,b){var c="";if(b.match(/^ng/)){var d=b.replace(/^ng/,"").toLowerCase();c+=" ng-"+d+'="'+a[b]+'"'}else if("helpText"!=b&&"labelClass"!=b&&"defaultValue"!=b)switch(b){case"required":c+=" required";break;case"autocomplete":c+=' autocomplete="',c+=1==a.autocomplete||"on"==a.autocomplete?'on"':'off"';break;default:c+=" "+b+'="'+a[b]+'" '}return c},this.button=function(a,b){var c='<button type="button" class="btn';c+=b["class"]?" "+b["class"]:" btn-default",c+='"';for(var d in b)"class"!=d&&"icon"!=d&&"label"!=d&&(c+=this.attribute(b,d));return b.ngDisabled||"save"!=a||(c+=' ng-disabled="'+this.form.name+".$invalid || "+this.form.name+'.$pristine"'),b.ngDisabled||"reset"!=a||(c+=' ng-disabled="'+this.form.name+'.$pristine"'),c+=">",c+=b.icon?'<i class="fa '+b.icon+'"></i> ':"",c+=b.label?b.label:"",c+="</button>\n"},this.inject=function(){var b=angular.element(document.getElementById(this.targetId));b.append(this.build()),a(b)(this.scope)},this.clearErrors=function(){for(var a in this.form.fields)this.scope[this.form.name+"_"+a+"_error"]=""},this.resetForm=function(a){var c,d,e,f=b(a)?{}:a;for(var g in this.form.fields)c=this.form.fields[g],d=c.ngModel?c.ngModel:g,"spinner"==c.type?(e=b(f[d])?b(c.defaultValue)?"":c.defaultValue:f[d],$("#fld_"+g).spinner("value",e)):this.scope[d]=f[d]?f[d]:b(c.defaultValue)?"":c.defaultValue,this.scope[this.form.name][g].$setPristine(),this.scope[this.form.name+"_"+g+"_error"]=""},this.init()}}}]).directive("afSpinner",[function(){return{require:"ngModel",link:function(a,b,c,d){var e=c.afSpinner;$(b).spinner({change:function(){a[c.ngModel]=$(this).spinner("value")},spin:function(){a[e].$setDirty(),d.$dirty=!0,d.$pristine=!1,a.$$phase||a.$digest()}})}}}]);