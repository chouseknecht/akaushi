/*
 *
 * angular-forms.js - v1.0.8 - 2014-04-06
 *
 */
"use strict";angular.module("AngularModalModule",[]).factory("AngularModal",["$compile",function(a){return function(b){var c=function(){this.init=function(){this.modal=b.modal,this.targetId=b.targetId,this.parent_scope=b.scope},this.build=function(){var a,b,c,d="";d+='<div id="'+this.modal.name+'" af-modal ng-show="'+this.modal.name+'_show" ',d+=this.attribute(this.modal,"class","af-modal"),d+=this.modal.height?' data-height="'+this.modal.height+'"':"",d+=this.modal.width?' data-width="'+this.modal.width+'"':"",d+=">\n",d+='<div class="af-modal-header">'+this.modal.title+"</div>\n",d+="<div "+this.attribute(this.modal.body,"class","af-modal-body"),d+=this.modal.body.ngBindHtml?" "+this.attribute(this.modal.body,"ngBindHtml"):"",d+=">",d+=this.modal.body.text?this.modal.body.text:"",d+="</div>\n",d+="<div "+this.attribute(this.modal.footer,"class","af-modal-footer")+">\n";for(c in this.modal.buttons){b=this.modal.buttons[c],d+='<button type="button"';for(a in b)"icon"!==a&&"label"!==a&&(d+=" "+this.attribute(b,a));d+=">",d+=b.icon?this.attribute(b,"icon"):"",d+=b.label?" "+b.label:"",d+="</button>\n"}return d+="</div>\n",d+="</div><!-- modal -->\n"},this.attribute=function(a,b,c){var d,e,f;if(/^ng/.test(b)){for(d=b.replace(/^ng/,""),f="ng",e=0;e<d.length;e++)f+=/[A-Z]/.test(d.charAt(e))?"-"+d.charAt(e).toLowerCase():d.charAt(e);f+='="'+a[b]+'"'}else"class"===b?(f='class="',f+=c?c:" ",f+=a["class"]?a["class"]:"",f=f.replace(/ $/,""),f+='"'):f="icon"===b?'<i class="fa '+a.icon+'"></i>':"dismiss"===b?"ng-click=\"modalHide('"+this.modal.name+"', $event)\"":" "+b+'="'+a[b]+'" ';return f},this.inject=function(){var b=angular.element(document.getElementById(this.targetId));b.empty().append(this.build()),a(b)(this.parent_scope),this.parent_scope.modalHide=function(a,b){var c=angular.element(b.target).scope();c[a+"_show"]=!1}},this.init()};return new c}}]).directive("afModal",[function(){return{link:function(a,b,c){var d,e,f,g,h,i,j,k,l;f=$(document).width(),g=$(window).height(),h=c.width,i=c.height?c.height:500,j=parseInt($(b).find(".af-modal-header").css("height").replace(/px/,""),10),k=parseInt($(b).find(".af-modal-footer").css("height").replace(/px/,""),10),l=i-(j+k),h=h?h:500,h=h>f?f:h,d=f>h?Math.floor((f-h)/2):0,e=g>i?Math.floor((g-i)/2):0,$(b).css({top:e,left:d}),$(b).find(".af-modal-body").css({height:l}),$(b).width(h).draggable().resizable({minWidth:h,minHeight:i,stop:function(a,b){var c=parseInt(b.element.css("height").replace(/px/,""),10),d=c-(j+k);b.element.find(".af-header-height").css({height:j+"px"}),b.element.find(".af-footer-height").css({height:k+"px"}),b.element.find(".af-modal-body").css({height:d+"px"})}})}}}]);